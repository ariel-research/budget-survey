<!-- 
This template allows users to create their budget vector by allocating 100 points among three government departments.
It includes form validation to ensure the total is 100 and each value is divisible by 5.
The page inherits from base.html and customizes the title and content blocks.
-->

{% extends "base.html" %}
{% block content %}

<div class="create-vector-container {% if get_current_language() == 'he' %}rtl{% endif %}">
    <h1>{{ get_translation('create_vector_title') }}</h1>
    
    <!-- Instructions section -->
    <div class="instructions-section">
        <div class="instruction-text">
            {{ get_translation('budget_instructions', subjects=", ".join(subjects)) }}
        </div>
        
        <!-- Rules section -->
        <div class="rules-section">
            <div class="rules-title">{{ get_translation('sum_note').title }}</div>
            <ul>
                {% for rule in get_translation('sum_note').rules %}
                    <li>{{ rule }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- Error message display -->
    {% if error %}
        <div class="error-message">{{ error }}</div>
    {% endif %}

    <!-- Main form -->
    <form method="POST" data-form-type="create-vector">
        <!-- Budget input fields -->
        <div class="budget-inputs">
            {% for subject in subjects %}
            <div class="input-group">
                <label for="{{ subject }}">{{ subject }}:</label>
                <input type="number" 
                        id="{{ subject }}"
                        name="{{ subject }}"
                        min="0"
                        value="0"
                        class="budget-input"
                >
            </div>
            {% endfor %}
        </div>

        <!-- Total and rescale controls -->
        <div class="total-controls">
            <div class="total-display">
                {{ get_translation('total') }} <span id="total">0</span>
            </div>
            <button type="button" 
                    id="rescale-btn" 
                    class="btn btn-secondary" 
                    title="{{ get_translation('rescale_tooltip') }}"
                    disabled>
                {{ get_translation('rescale_button') }}
            </button>
        </div>

        <!-- Dynamic error display -->
        <div id="error-display" class="error-message" style="display: none;"></div>

        <!-- Submit button -->
        <div class="submit-container">
            <button type="submit" id="submit-btn" class="btn" disabled>
                {{ get_translation('submit') }}
            </button>
        </div>
    </form>
</div>

{% endblock %}
